<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"
      await
    ></script>
    <link rel="stylesheet" href="/stylesheets/Perfil.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />

    <title>Contrata-Dev</title>
  </head>
  <body>
    <div class="perfil-container">
      <!-- Botão voltar -->
      <div class="voltar">
        <a class="voltar" href="/develop/dashboard">
        <iconify-icon icon="iconamoon:arrow-left-2" width="20"></iconify-icon>
        Voltar
        </a>
      </div>

      <div class="conteudo">
        <!-- Coluna esquerda -->
        <div class="col-esquerda">
          <div class="avatar">
            <% if (developer && developer.avatar) { %>
              <img src="<%= developer.avatar %><%= ts ? ('?t=' + ts) : '' %>" alt="avatar" style="width:100%; height:100%; border-radius:50%; object-fit:cover;" />
            <% } else { %>
              <!--aqui vai ficar a img de perfil do usuario  -->
            <% } %>
          </div>
          <h2><%= developer && developer.User ? developer.User.name : 'Nome do Usuário' %></h2>

          <div class="tecnologias">
            <p>Tecnologias</p>
            <div class="tech-icons">
              <% if (developer && developer.TechnologyStacks && developer.TechnologyStacks.length) { %>
                <% developer.TechnologyStacks.forEach(function(ts){ %>
                  <div class="tech-item"><%= ts.name %></div>
                <% }) %>
              <% } else { %>
                <p class="muted">Nenhuma tecnologia cadastrada</p>
              <% } %>
            </div>
          </div>

          <a href="/develop/edit-perfil" class="btn-editar">Editar Perfil</a>
        </div>

        <!-- Coluna direita -->
        <div class="col-direita">
          <h2>Informações do Perfil</h2>
          <div class="info-box">
            <p><strong>Email</strong></p>
            <input type="text" value="<%= developer && developer.User ? developer.User.email : 'nome@example.com.br' %>" readonly />

            <p><strong>Telefone</strong></p>
            <input type="text" value="<%= developer && developer.phone ? developer.phone : '+XX (XX) XXXXX-XXXX' %>" readonly />

            <p><strong>País</strong></p>
            <input type="text" value="<%= developer && developer.country ? developer.country : 'Brasil' %>" readonly />
          </div>

          <!-- Projetos -->
          <div class="projetos">
            <h3>Projetos</h3>
            <% if (developer && developer.PortfolioItems && developer.PortfolioItems.length) { %>
              <% developer.PortfolioItems.forEach(function(card){ %>
                <div class="projeto-card">
                  <iconify-icon icon="mdi:github" width="62"></iconify-icon>
                  <div>
                    <p><%= card.title %></p>
                    <p>Link: <%= card.url || card.link %></p>
                  </div>
                </div>
              <% }) %>
            <% } else { %>
              <p class="muted">Nenhum projeto encontrado</p>
            <% } %>
            <!-- Repita os cards para mais projetos -->
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
